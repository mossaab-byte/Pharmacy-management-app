# Generated by Django 5.2.2 on 2025-07-07 17:28

import django.db.models.deletion
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('Pharmacy', '0003_alter_pharmacy_open_hours'),
        ('Purchases', '0001_initial'),
        ('Sales', '0004_alter_sale_units_sold'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='PaymentTerm',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('days', models.PositiveIntegerField()),
                ('discount_percentage', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('discount_days', models.PositiveIntegerField(default=0)),
                ('description', models.TextField(blank=True)),
            ],
        ),
        migrations.CreateModel(
            name='TaxConfiguration',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('tax_rate', models.DecimalField(decimal_places=4, max_digits=5)),
                ('tax_type', models.CharField(choices=[('VAT', 'Value Added Tax'), ('GST', 'Goods and Services Tax'), ('SALES', 'Sales Tax'), ('EXCISE', 'Excise Tax')], max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('effective_from', models.DateField()),
                ('effective_to', models.DateField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='BudgetPlan',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('budget_name', models.CharField(max_length=100)),
                ('budget_type', models.CharField(choices=[('REVENUE', 'Revenue Budget'), ('EXPENSE', 'Expense Budget'), ('CAPITAL', 'Capital Expenditure Budget'), ('CASH_FLOW', 'Cash Flow Budget')], max_length=20)),
                ('period_start', models.DateField()),
                ('period_end', models.DateField()),
                ('total_budgeted', models.DecimalField(decimal_places=2, max_digits=15)),
                ('total_actual', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('is_approved', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_budgets', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('pharmacy', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Pharmacy.pharmacy')),
            ],
        ),
        migrations.CreateModel(
            name='CashFlow',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('flow_type', models.CharField(choices=[('OPERATING', 'Operating Activities'), ('INVESTING', 'Investing Activities'), ('FINANCING', 'Financing Activities')], max_length=20)),
                ('description', models.CharField(max_length=255)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=12)),
                ('transaction_date', models.DateField()),
                ('reference_id', models.CharField(blank=True, max_length=100)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('pharmacy', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Pharmacy.pharmacy')),
                ('recorded_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='CashFlowForecast',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('forecast_date', models.DateField()),
                ('forecast_period_days', models.PositiveIntegerField(default=30)),
                ('opening_cash_balance', models.DecimalField(decimal_places=2, max_digits=15)),
                ('projected_sales', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('projected_receivables_collection', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('other_inflows', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('total_projected_inflows', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('projected_purchases', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('projected_payables_payment', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('projected_expenses', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('projected_tax_payments', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('other_outflows', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('total_projected_outflows', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('projected_closing_balance', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('minimum_cash_required', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('cash_surplus_deficit', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('requires_financing', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('pharmacy', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Pharmacy.pharmacy')),
            ],
        ),
        migrations.CreateModel(
            name='ExpenseCategory',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('parent_category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='Finance.expensecategory')),
            ],
            options={
                'verbose_name_plural': 'Expense Categories',
            },
        ),
        migrations.CreateModel(
            name='Expense',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('description', models.CharField(max_length=255)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=12)),
                ('expense_date', models.DateField()),
                ('vendor', models.CharField(blank=True, max_length=255)),
                ('receipt_number', models.CharField(blank=True, max_length=100)),
                ('tax_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('is_recurring', models.BooleanField(default=False)),
                ('recurrence_pattern', models.CharField(blank=True, choices=[('MONTHLY', 'Monthly'), ('QUARTERLY', 'Quarterly'), ('YEARLY', 'Yearly')], max_length=20)),
                ('notes', models.TextField(blank=True)),
                ('receipt_image_path', models.CharField(blank=True, max_length=255)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('pharmacy', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Pharmacy.pharmacy')),
                ('recorded_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('category', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Finance.expensecategory')),
            ],
        ),
        migrations.CreateModel(
            name='BudgetLineItem',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('description', models.CharField(max_length=255)),
                ('budgeted_amount', models.DecimalField(decimal_places=2, max_digits=12)),
                ('actual_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('notes', models.TextField(blank=True)),
                ('budget', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='line_items', to='Finance.budgetplan')),
                ('category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='Finance.expensecategory')),
            ],
        ),
        migrations.CreateModel(
            name='FinancialPeriod',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('period_type', models.CharField(choices=[('MONTHLY', 'Monthly'), ('QUARTERLY', 'Quarterly'), ('YEARLY', 'Yearly')], max_length=20)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('is_closed', models.BooleanField(default=False)),
                ('closed_at', models.DateTimeField(blank=True, null=True)),
                ('closed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('pharmacy', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Pharmacy.pharmacy')),
            ],
        ),
        migrations.CreateModel(
            name='Budget',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('budgeted_sales', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('actual_sales', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('budgeted_cogs', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('actual_cogs', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('budgeted_expenses', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('actual_expenses', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('is_approved', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('pharmacy', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Pharmacy.pharmacy')),
                ('period', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Finance.financialperiod')),
            ],
        ),
        migrations.CreateModel(
            name='FinancialReport',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('report_type', models.CharField(choices=[('PROFIT_LOSS', 'Profit & Loss Statement'), ('BALANCE_SHEET', 'Balance Sheet'), ('CASH_FLOW', 'Cash Flow Statement'), ('SALES_SUMMARY', 'Sales Summary'), ('EXPENSE_SUMMARY', 'Expense Summary'), ('TAX_REPORT', 'Tax Report'), ('INVENTORY_VALUATION', 'Inventory Valuation')], max_length=30)),
                ('period_type', models.CharField(choices=[('DAILY', 'Daily'), ('WEEKLY', 'Weekly'), ('MONTHLY', 'Monthly'), ('QUARTERLY', 'Quarterly'), ('YEARLY', 'Yearly'), ('CUSTOM', 'Custom Period')], max_length=20)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('total_revenue', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('total_expenses', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('gross_profit', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('net_profit', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('profit_margin', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('total_sales_count', models.PositiveIntegerField(default=0)),
                ('average_sale_value', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('customer_count', models.PositiveIntegerField(default=0)),
                ('report_data', models.JSONField(default=dict)),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
                ('generated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('pharmacy', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Pharmacy.pharmacy')),
            ],
        ),
        migrations.CreateModel(
            name='AccountsReceivable',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('original_amount', models.DecimalField(decimal_places=2, max_digits=12)),
                ('outstanding_amount', models.DecimalField(decimal_places=2, max_digits=12)),
                ('due_date', models.DateField()),
                ('is_overdue', models.BooleanField(default=False)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Sales.customer')),
                ('sale', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Sales.sale')),
                ('payment_terms', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='Finance.paymentterm')),
            ],
        ),
        migrations.CreateModel(
            name='AccountsPayable',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('original_amount', models.DecimalField(decimal_places=2, max_digits=12)),
                ('outstanding_amount', models.DecimalField(decimal_places=2, max_digits=12)),
                ('due_date', models.DateField()),
                ('is_overdue', models.BooleanField(default=False)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('purchase', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Purchases.purchase')),
                ('supplier', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Purchases.supplier')),
                ('payment_terms', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='Finance.paymentterm')),
            ],
        ),
        migrations.CreateModel(
            name='ProfitLossStatement',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('gross_sales', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('returns_allowances', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('net_sales', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('opening_inventory', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('purchases', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('closing_inventory', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('cogs', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('gross_profit', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('salaries_wages', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('rent_utilities', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('marketing_advertising', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('insurance', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('depreciation', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('other_expenses', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('total_operating_expenses', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('operating_income', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('other_income', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('interest_expense', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('taxes', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('net_income', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
                ('generated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('period', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Finance.financialperiod')),
                ('pharmacy', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Pharmacy.pharmacy')),
            ],
        ),
        migrations.CreateModel(
            name='TaxCalculation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tax_period', models.CharField(choices=[('MONTHLY', 'Monthly'), ('QUARTERLY', 'Quarterly'), ('YEARLY', 'Yearly')], max_length=20)),
                ('period_start', models.DateField()),
                ('period_end', models.DateField()),
                ('total_taxable_sales', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('sales_tax_collected', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('total_taxable_purchases', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('purchase_tax_paid', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('net_tax_liability', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('tax_paid', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('tax_refund_due', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('is_filed', models.BooleanField(default=False)),
                ('filed_date', models.DateField(blank=True, null=True)),
                ('filing_reference', models.CharField(blank=True, max_length=100)),
                ('calculated_at', models.DateTimeField(auto_now_add=True)),
                ('calculated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('pharmacy', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Pharmacy.pharmacy')),
            ],
        ),
        migrations.CreateModel(
            name='FinancialKPI',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('kpi_type', models.CharField(choices=[('GROSS_MARGIN', 'Gross Profit Margin'), ('NET_MARGIN', 'Net Profit Margin'), ('INVENTORY_TURNOVER', 'Inventory Turnover'), ('RECEIVABLES_TURNOVER', 'Accounts Receivable Turnover'), ('PAYABLES_TURNOVER', 'Accounts Payable Turnover'), ('CURRENT_RATIO', 'Current Ratio'), ('QUICK_RATIO', 'Quick Ratio'), ('ROA', 'Return on Assets'), ('ROE', 'Return on Equity'), ('DEBT_TO_EQUITY', 'Debt to Equity Ratio')], max_length=30)),
                ('period_date', models.DateField()),
                ('kpi_value', models.DecimalField(decimal_places=4, max_digits=10)),
                ('target_value', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True)),
                ('industry_benchmark', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True)),
                ('calculated_at', models.DateTimeField(auto_now_add=True)),
                ('pharmacy', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Pharmacy.pharmacy')),
            ],
            options={
                'ordering': ['-period_date'],
                'unique_together': {('pharmacy', 'kpi_type', 'period_date')},
            },
        ),
    ]
